document.addEventListener("DOMContentLoaded",function(){const form=document.getElementById("contactForm");if(!form){console.error("Form not found!");return}
form.addEventListener("submit",async function(event){event.preventDefault();let name=document.getElementById("name")?.value.trim();let email=document.getElementById("email")?.value.trim();let phone=document.getElementById("phone")?.value.trim();let entreprise=document.getElementById("entreprise")?.value.trim();let message=document.getElementById("message")?.value.trim();let budget=document.querySelector('input[name="budget"]:checked')?.value;let errorMessage="Veuillez remplir tous les champs requis :";let hasError=!1;let emailRegex=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;if(!name){errorMessage+="\n- Nom complet";hasError=!0}
if(!email){errorMessage+="\n- Courriel";hasError=!0}else if(!emailRegex.test(email)){errorMessage+="\n- Format du courriel invalide";hasError=!0}
if(!phone){errorMessage+="\n- Téléphone";hasError=!0}
if(hasError){Swal.fire({icon:"error",title:"Erreur",text:errorMessage});return}
let formData=JSON.stringify({name,email,phone,entreprise,message,budget});try{let response=await fetch(form.action,{method:"POST",body:formData,headers:{"Accept":"application/json","Content-Type":"application/json"}});if(response.ok){Swal.fire({icon:"success",title:"Formulaire envoyé!",text:"Nous avons bien reçu votre message.",showConfirmButton:!1,timer:2500});setTimeout(()=>{form.reset()},2000)}else{throw new Error("Erreur lors de l'envoi du formulaire.")}}catch(error){Swal.fire({icon:"error",title:"Erreur",text:"Une erreur s'est produite. Veuillez réessayer plus tard."});console.error("Form submission error:",error)}})})